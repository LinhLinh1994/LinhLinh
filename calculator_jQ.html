<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Tiện ích máy tính online</title>
	<style>
		* {
			padding: 0;
			margin: 0;
		}

		body {
			font-family: sans-serif;
			font-size: 14px;
			color: #333;
		}

		.calculator {
			width: 300px;
			height: auto;
			margin: 20px auto;
			padding: 10px;
			border: 1px solid #666;
			border-radius: 4px;
		}

		.box-calculation {
			width: calc(100% - 16px);
			background-color: #f7f8f9;
			border: 1px solid #666;
			padding: 5px 7px;
			font-size: 20px;
			border-bottom: none;
		}

		.box-result {
			width: calc(100% - 16px);
			background-color: #f9f9f9;
			border: 1px solid #666;
			padding: 5px 7px;
			font-size: 20px;
			border-top: none;
			text-align: right;
		}

		.box-button button {
			width: 32.4%;
			height: 40px;
			margin-top: 5px;
			font-size: 20px;
			color: #fff;
			border: none;
			cursor: pointer;
			border-radius: 4px;
		}

		button.number {
			background-color: #428bca;
		}

		button.operation {
			background-color: #5cb85c;
		}

		button.refresh {
			background-color: #d9534f;
		}

		button.del {
			background-color: #f0ad4e;
		}

		button.dot,
		button.equal {
			background-color: #5bc0de;
		}
	</style>
</head>

<body>
	<div class="calculator">
		<input type="text" class="box-calculation" value="">
		<input type="text" class="box-result" value="">
		<div class="box-button">
			<button class="refresh">CE</button>
			<button class="del">Del</button>
			<button class="init plus operation">+</button>
			<button class="init minus operation">-</button>
			<button class="init imes operation">*</button>
			<button class="init divide operation">/</button>
			<button class=" number">9</button>
			<button class=" number">8</button>
			<button class=" number">7</button>
			<button class=" number">6</button>
			<button class=" number">5</button>
			<button class=" number">4</button>
			<button class=" number">3</button>
			<button class=" number">2</button>
			<button class=" number">1</button>
			<button class=" number">0</button>
			<button class="dot">.</button>
			<button class="init equal">=</button>
		</div>
	</div>

	<script src="http://code.jquery.com/jquery.js"></script>
	<script>
		// Thực hiện các hành động bên trong khi tài liệu html của trang web được load xong và cây DOM được tạo thành

	
		const elements = document.querySelectorAll('.init')

		window.addEventListener('DOMContentLoaded', (event) => {
			addAttribute('.init', 'disabled', 'true')
		});
		
		
		const addAttribute = (Selector,attr,value) => {
			const operation = document.querySelectorAll(Selector) // class, id , the 
				operation.forEach((item) => {
					item.setAttribute(attr,value) // arrt : thuoc tinh // value : gia tri cua thuoc tinh			
				})
		}

		const removeAttribute = (Selector,attr) => {
			const operation = document.querySelectorAll(Selector)
				operation.forEach((item) => {
					item.removeAttribute(attr)					
				})
		}

		// $(document).ready(function() {
		// 	$('.box-calculation').attr('disabled', 'true'); // Vô hiệu hoá ô phép tính
		// 	$('.box-result').attr('disabled', 'true'); // Vô hiệu hoá ô kết quả
		// 	$('.box-button button.times').attr('disabled', 'true'); // Vô hiệu hoá nút nhân
		// 	$('.box-button button.divide').attr('disabled', 'true'); // Vô hiệu hoá nút chia
		// 	$('.box-button button.equal').attr('disabled', 'true'); // Vô hiệu hoá nút bằng
		// });

		// Thực hiện các hành động bên trong khi click vào các nút số
		const element1s = document.querySelectorAll('.box-button button.number')
		element1s.forEach((element1) => {
			element1.addEventListener('click', () => {
				$char = element1.innerHTML // Lấy số vừa click
				const calculation = document.querySelector('.box-calculation')
				$value_calculation = calculation.value; // Lấy chuỗi giá trị trong ô phép tính
				calculation.value = $value_calculation + $char; // Thêm số vừa click vào sau chuỗi giá trị trong ô phép tính
				removeAttribute('.box-button button.operation','disabled')
				removeAttribute('.box-button  button.equal','disabled')				
					// Gỡ bỏ vô hiệu hoá các nút phép toán
					// Gỡ bỏ vô hiệu hoá nút bằng				
			})
		})
		
		

		// Thực hiện các hành động bên trong khi click vào các nút dấu chấm

		// $('.box-button button.dot').on('click', function () {
		// 	$char = $(this).html(); // Lấy dấu chấm
		// 	$value_calculation = $('.box-calculation').val(); // Lấy chuỗi giá trị trong ô phép tính
		// 	$('.box-calculation').val($value_calculation + $char); // Thêm dấu chấm vào sau chuỗi giá trị trong ô phép tính
		// 	$('.box-button button.operation').attr('disabled', 'true'); // Vô hiệu hoá các nút phép toán
		// 	$(this).attr('disabled', 'true'); // Vô hiệu hoá nút dấu chấm
		// });
		const element2s = document.querySelectorAll('.box-button button.dot')
		element2s.forEach((element2) => {
			element2.addEventListener('click', () =>{
				$char = element2.innerHTML;// Lấy dấu chấm
				const calculation2 = document.querySelector('.box-calculation')
				$value_calculation = calculation2.value //Lấy chuỗi giá trị trong ô phép tính
				calculation2.value = ($value_calculation + $char)// Thêm dấu chấm vào sau chuỗi giá trị trong ô phép tính

				
				
				// addAttribute (Selector,attr,value)
				addAttribute ('.box-button button.operation','disabled', 'true');// Vô hiệu hoá các nút phép toán
				addAttribute ('.box-button button.dot','disabled', 'true');// Vô hiệu hoá nút dấu chấm
			})
		})





		// Thực hiện các hành động bên trong khi click vào các nút CE
		const element3s = document.querySelectorAll('.box-button button.refresh')
		element3s.forEach((element3) => {
			element3.addEventListener('click', () => {
				const calculation3 = document.querySelector('.box-calculation')
				calculation3.value= ''// Làm trống ô phép tính
				const result = document.querySelector('.box-result')
				result.value = ''// Làm trống ô kết quả

			})
		})


		// Thực hiện các hành động bên trong khi click vào các nút Del
		const element4s = document.querySelectorAll('.box-button button.del')
		element4s.forEach((element4) => {
			element4s.addEventListener('click', () => {
				const calculation4 = document.querySelector('.box-calculation')
				$string = calculation4.value()
				calculation4.value = $string.substring(0, $string.length - 1)
			})
		})

		// Thực hiện các hành động bên trong khi click vào các nút phép toán
		const element5s = document.querySelectorAll('.box-button button.operation')
		element5s.forEach((element5) => {
			element5s.addEventListener('click', () => {
				$char = element5.innerHTML // Lấy dấu phép toán vừa click
				const calculation5 = document.querySelectorAll('.box-calculation')
				$value_calculation = calculation5.value
				calculation5.value = $value_calculation + $char // Thêm dấu phép toán vừa click vào sau chuỗi giá trị trong ô phép tính
				addAttribute ('.box-button button.times','disabled', 'true') // Vô hiệu hoá nút nhân
				addAttribute ('.box-button button.divide','disabled', 'true') // Vô hiệu hoá nút chia
				removeAttribute ('.box-button button.dot','disabled') // Gỡ bỏ vô hiệu hoá nút dấu chấm
			
			})
		})

		// Thực hiện các hành động bên trong khi click vào các nút bằng
		$('.box-button button.equal').on('click', function () {
			$result = $('.box-calculation').val(); // Lấy chuỗi giá trị trong ô phép tính
			$('.box-result').val(eval($result)); // Hiển thị kết quả trong ô kết quả
		});

		const element6s = document.querySelectorAll('.box-button button.equal')
		


	</script>
</body>

</html>